@(unmatchedPlans: List[Plan], matchedPlans: List[Plan], user: Option[User])(implicit lang: Lang, flash: Flash)

@main("Plans") {

  <h2>Looking for a buddy!</h2>

  <div>
    @if(unmatchedPlans.isEmpty) {
      <div>
      @Messages("plans.noUnmatched")
      </div>
      <div>
        <a href="@routes.Plans.showForm()">@Messages("plans.whyNotMakeOne")</a>
      </div>
    } else {
      <dl>
      @for(plan <- unmatchedPlans) {
        <dd>
          <blockquote>
            <p>
              I'm planning to hack on <strong>@plan.summary</strong>. Care to join me?
            </p>
            @plan.details.map { d =>
              <p class="text-info details" data-plan-id="@plan.id">@d</p>
            }
            <p><small>@plan.creator.name</small></p>
            @if(!(user.isDefined && user.get.id == plan.creator.id)) {
              <div>
                <a class="btn btn-primary" href="@routes.Plans.offer(plan.id)">Count me in!</a>
              </div>
            }
          </blockquote>
        </dd>
      }
      </dl>
      <div>
        @if(user.isDefined) {
          <a href="@routes.Plans.showForm()">@Messages("plans.addANewPlan")</a>
        } else {
          Want to add a plan? First <a href="@routes.Users.showLoginForm()">login</a> or <a href="@routes.Users.showSignupForm()">Signup</a>.
        }
      </div>
    }
  </div>

  <hr/>

  <h2>Recently matched</h2>

  <div>
    @if(matchedPlans.isEmpty) {
      <div>
        None yet :(
      </div>
    } else {
      <dl>
      @for(plan <- matchedPlans) {
        <dd>
          <p><strong>@plan.creator.name</strong> and <strong>@plan.offerer.map(_.name)</strong> are planning to hack on <strong>@plan.summary</strong>. Good luck to them!</p>
        </dd>
      }
      </dl>

    }

  </div>
}
